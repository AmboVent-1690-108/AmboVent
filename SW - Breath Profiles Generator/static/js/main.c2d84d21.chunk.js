(this["webpackJsonpbreathe-profiles"]=this["webpackJsonpbreathe-profiles"]||[]).push([[0],{18:function(e,t,n){e.exports=n(33)},30:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(16),c=n.n(o),l=n(10),i=n(11),u=n(13),s=n(12),m=n(14),p=n(35),d=n(36),h=n(37),f=n(38),y=n(39),x=n(40),E=(n(23),n(7)),v=n.n(E),g=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).componentWillMount=function(){n.totalLength=n.getTotalLength()},n.getOffsetLength=function(){return n.totalLength-n.totalLength*n.props.progress},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getTotalLength",value:function(){var e=this;return this.props.points.reduce((function(t,n,a,r){return a?e.distance(r[a-1],n)+t:t}),0)}},{key:"distance",value:function(e,t){var n=e.y-t.y,a=e.x-t.x;return Math.sqrt(a*a+n*n)}},{key:"d",value:function(){var e=this.props.points;return e.reduce((function(e,t){return"".concat(e,"L").concat(t.x,",").concat(t.y)}),"M".concat(e[0].x,",").concat(e[0].y))}},{key:"render",value:function(){var e,t=this.props,n=t.color,a=t.trace,o=t.strokeWidth;return a&&(e={strokeDasharray:this.totalLength,strokeDashoffset:this.getOffsetLength()}),r.a.createElement("path",{fill:"transparent",stroke:n,strokeWidth:o,d:this.d(),style:e})}}]),t}(a.Component);g.defaultProps={color:"#e1e1e1",strokeWidth:.15};var b=n(17),P=n.n(b),w=(n(30),{x:0,y:0}),k={x:10,y:0},N=10,j=0,I=255,O=0,W=600,L=0,S=300,M=W/N,F=S/I,T=function(e){var t={left:"".concat(e.x*M,"px"),bottom:"".concat(e.y*F,"px")},n={width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),left:"".concat(e.size/2,"px"),top:"".concat(e.size/2,"px")};return r.a.createElement("div",{style:t,className:"wanted-point-container"},r.a.createElement("div",{style:n,className:"wanted-point"}))},q=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.idx+1),r.a.createElement("td",null,r.a.createElement(p.a,{value:e.x,step:.5,type:"number",required:!0,onInput:e.onInput,name:"x",placeholder:"X"})),r.a.createElement("td",null,r.a.createElement(p.a,{value:e.y,step:10,type:"number",required:!0,onInput:e.onInput,name:"y",placeholder:"Y"})),r.a.createElement("td",null,r.a.createElement(d.a,{onClick:e.onDelete,className:"btn-sm",color:"danger"},"X")))},C=function(e,t){return{x:e*t.x,y:e*t.y}},D=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},J=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},z=function(e,t,n,a){if(!e||!t||t.y>=I||t.y<=j)return{x:a,y:0};var r=C(1,J(t,e)),o=C(1,J(n,t));return C(.5,D(r,o))},X=function(e,t){return e.slice(1).map((function(n,a){var r=Number(a)+2,o=function(e,t,n,a,r){return function(o){var c=z(e,t,n,r),l=z(t,n,a,r);return[C(2*o*o*o-3*o*o+1,t),C(o*o*o-2*o*o+o,c),C(-2*o*o*o+3*o*o,n),C(o*o*o-o*o,l)].reduce(D,{x:0,y:0})}}(e[r-3],e[r-2],e[r-1],e[r],t);return v.a.range(0,1,.01).map((function(e){return o(e)}))}))},Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).renderWantedPoints=function(){return n.state.wantedPoints.map((function(e,t){return r.a.createElement(T,{key:"p-".concat(t),x:e.x,y:e.y})}))},n.renderPath=function(){return X(n.state.wantedPoints,n.state.mag).map((function(e){return r.a.createElement(g,{className:"path",color:"#555555",points:e.map((function(e){return{x:e.x*M,y:e.y*F}})),strokeWidth:3,progress:1,trace:!1})}))},n.onInput=function(e){var t=e.target,a=t.name,r=t.value,o=n.state;o[a]=r,n.setState(o)},n.onPointInput=function(e){var t=e.target,a=t.name,r=t.value,o=n.state.newPoint;o[a]=r,n.setState({newPoint:o})},n.onFileLoad=function(e){var t=new FileReader;t.onloadend=function(){try{var e=JSON.parse(t.result);n.setState(e)}catch(a){console.error("Json is corrupted")}},t.readAsText(e.target.files[0])},n.createTextFile=function(){var e=N/500,t=X(n.state.wantedPoints,n.state.mag),a=v.a.flatten(t),r=a.map((function(e){return e.x})),o=a.map((function(e){return e.y})),c=v.a.range(0,N,e),l=P.a.linear(c,r,o),i=l.slice(1).map((function(t,n){return(t-l[n])/e}));i.push(0),l=l.map(Math.round).map(Math.abs).map((function(e){return Math.min(e,I)})),i=i.map((function(e){return e/5})).map((function(e){return e+128})).map(Math.round);var u="".concat("byte pos[profile_length]={").concat(l.join(",")).concat("};","\n").concat("byte vel[profile_length]={").concat(i.join(",")).concat("};");n.setState({output:u})},n.addWantedPoint=function(e){e.preventDefault();var t=n.state,a=t.wantedPoints,r=t.newPoint;a.push(v.a.clone(r));var o=v.a.sortBy(a,(function(e){return Number(e.x)}));r.x=Number(r.x)+1,n.setState({wantedPoints:o,newPoint:r}),e.target.reset()},n.editWantedPoint=function(e){return function(t){var a=t.target,r=a.name,o=a.value,c=n.state.wantedPoints;c[e][r]=o,n.setState({wantedPoints:c})}},n.removeWantedPoint=function(e){return function(){var t=n.state.wantedPoints;n.setState({wantedPoint:v.a.remove(t,e)})}},n.state={wantedPoints:[w,k],newPoint:{x:1,y:0},mag:6,output:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t={width:"".concat(W-O,"px"),height:"".concat(S-L,"px")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ml-4 mr-4 app"},r.a.createElement(h.a,null,r.a.createElement(f.a,{xs:"6"},r.a.createElement("div",{style:t,className:"graph-area"},this.renderWantedPoints(),r.a.createElement("svg",{style:t,transform:"scale(1,-1)"},this.renderPath()))),r.a.createElement(f.a,{xs:"6",className:"text-center"},r.a.createElement(y.a,{className:"main-table table-bordered table-sm mt-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"X"),r.a.createElement("th",null,"Y"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.wantedPoints.map((function(t,n){return r.a.createElement(q,{onDelete:e.removeWantedPoint(t),onInput:e.editWantedPoint(n),idx:n,key:"pd-".concat(n),x:t.x,y:t.y})})))))),r.a.createElement(h.a,null,r.a.createElement(f.a,{xs:"6"},r.a.createElement(x.a,{onSubmit:this.addWantedPoint},r.a.createElement(h.a,{className:"mt-4"},r.a.createElement(f.a,null,r.a.createElement(p.a,{value:this.state.newPoint.x,type:"number",required:!0,onInput:this.onPointInput,name:"x",placeholder:"X"})),r.a.createElement(f.a,null,r.a.createElement(p.a,{type:"number",required:!0,onInput:this.onPointInput,name:"y",placeholder:"Y"})),r.a.createElement(d.a,{type:"submit",color:"success"},"+"))),r.a.createElement(h.a,{className:"justify-content-center mt-4"},r.a.createElement(d.a,{type:"submit",onClick:this.createTextFile,color:"danger"},"Get Text"),r.a.createElement("label",{className:"ml-3"}," Magnitude: "),r.a.createElement(f.a,{xs:"3"},r.a.createElement(p.a,{name:"mag",type:"number",onInput:this.onInput,value:this.state.mag})),r.a.createElement("a",{href:"data:application/xml;charset=utf-8, ".concat(JSON.stringify(this.state)),download:"myProfile.json"},"Save"),r.a.createElement(f.a,{xs:"3"},r.a.createElement(p.a,{accept:".json",type:"file",onChange:this.onFileLoad}))),r.a.createElement(p.a,{type:"textarea",rows:"5",className:"mt-3",value:this.state.output})))))}}]),t}(r.a.Component);c.a.render(r.a.createElement(Y,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.c2d84d21.chunk.js.map